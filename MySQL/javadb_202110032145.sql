--
-- Script was generated by Devart dbForge Studio 2020 for MySQL, Version 9.0.688.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 03.10.2021 21:45:53
-- Server version: 5.5.62
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE javadb;

--
-- Drop table `sales`
--
DROP TABLE IF EXISTS sales;

--
-- Drop table `providers`
--
DROP TABLE IF EXISTS providers;

--
-- Drop table `waybill`
--
DROP TABLE IF EXISTS waybill;

--
-- Drop table `goods`
--
DROP TABLE IF EXISTS goods;

--
-- Drop table `categories`
--
DROP TABLE IF EXISTS categories;

--
-- Drop table `storage`
--
DROP TABLE IF EXISTS storage;

--
-- Drop table `stockcontrolcard`
--
DROP TABLE IF EXISTS stockcontrolcard;

--
-- Drop table `workers`
--
DROP TABLE IF EXISTS workers;

--
-- Drop table `roles`
--
DROP TABLE IF EXISTS roles;

--
-- Set default database
--
USE javadb;

--
-- Create table `roles`
--
CREATE TABLE roles (
  role varchar(50) NOT NULL,
  description varchar(255) NOT NULL,
  id int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create index `role` on table `roles`
--
ALTER TABLE roles
ADD UNIQUE INDEX role (role);

--
-- Create index `role_2` on table `roles`
--
ALTER TABLE roles
ADD UNIQUE INDEX role_2 (role);

--
-- Create table `workers`
--
CREATE TABLE workers (
  workerId int(11) NOT NULL AUTO_INCREMENT,
  name varchar(50) NOT NULL,
  role varchar(50) NOT NULL,
  birthday date NOT NULL,
  phone varchar(255) NOT NULL,
  address varchar(255) NOT NULL,
  salary int(11) NOT NULL,
  PRIMARY KEY (workerId)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create foreign key
--
ALTER TABLE workers
ADD CONSTRAINT FK_workers_role FOREIGN KEY (role)
REFERENCES roles (role) ON DELETE NO ACTION;

--
-- Create table `stockcontrolcard`
--
CREATE TABLE stockcontrolcard (
  id int(11) NOT NULL AUTO_INCREMENT,
  price int(11) NOT NULL,
  arrivadDate date NOT NULL,
  issueDate date DEFAULT NULL,
  place varchar(255) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create table `storage`
--
CREATE TABLE storage (
  id int(11) NOT NULL AUTO_INCREMENT,
  workerId int(11) NOT NULL,
  address varchar(255) NOT NULL,
  SccId int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create foreign key
--
ALTER TABLE storage
ADD CONSTRAINT FK_storage_SccId FOREIGN KEY (SccId)
REFERENCES stockcontrolcard (id) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE storage
ADD CONSTRAINT FK_storage_workerId FOREIGN KEY (workerId)
REFERENCES workers (workerId) ON DELETE NO ACTION;

--
-- Create table `categories`
--
CREATE TABLE categories (
  name varchar(50) NOT NULL,
  description varchar(255) NOT NULL,
  id int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create index `name` on table `categories`
--
ALTER TABLE categories
ADD UNIQUE INDEX name (name);

--
-- Create table `goods`
--
CREATE TABLE goods (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(50) NOT NULL,
  category varchar(50) NOT NULL,
  image varchar(255) NOT NULL,
  description varchar(255) NOT NULL,
  storageID int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create foreign key
--
ALTER TABLE goods
ADD CONSTRAINT FK_goods_storageID FOREIGN KEY (storageID)
REFERENCES storage (id) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE goods
ADD CONSTRAINT FK_goods_category FOREIGN KEY (category)
REFERENCES categories (name) ON DELETE NO ACTION;

--
-- Create table `waybill`
--
CREATE TABLE waybill (
  id int(11) NOT NULL AUTO_INCREMENT,
  createdDate date NOT NULL,
  itemId int(11) NOT NULL,
  count int(11) NOT NULL,
  price int(11) NOT NULL,
  SccId int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create index `SccId` on table `waybill`
--
ALTER TABLE waybill
ADD UNIQUE INDEX SccId (SccId);

--
-- Create foreign key
--
ALTER TABLE waybill
ADD CONSTRAINT FK_waybill_itemId FOREIGN KEY (itemId)
REFERENCES goods (id) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE waybill
ADD CONSTRAINT FK_waybill_SccId FOREIGN KEY (SccId)
REFERENCES stockcontrolcard (id) ON DELETE NO ACTION;

--
-- Create table `providers`
--
CREATE TABLE providers (
  providerId int(11) NOT NULL AUTO_INCREMENT,
  name varchar(50) DEFAULT NULL,
  phone varchar(255) DEFAULT NULL,
  waybillId int(11) DEFAULT NULL,
  PRIMARY KEY (providerId)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create foreign key
--
ALTER TABLE providers
ADD CONSTRAINT FK_providers_waybillId FOREIGN KEY (waybillId)
REFERENCES waybill (id) ON DELETE NO ACTION;

--
-- Create table `sales`
--
CREATE TABLE sales (
  id int(11) NOT NULL,
  itemId int(11) NOT NULL,
  dateOfSale date NOT NULL,
  mailOfBuyer varchar(255) NOT NULL,
  courier int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_unicode_ci;

--
-- Create foreign key
--
ALTER TABLE sales
ADD CONSTRAINT FK_sales_courier FOREIGN KEY (courier)
REFERENCES workers (workerId) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE sales
ADD CONSTRAINT FK_sales_itemId FOREIGN KEY (itemId)
REFERENCES goods (id) ON DELETE NO ACTION;

-- 
-- Dumping data for table roles
--
INSERT INTO roles VALUES
('Администратор', 'Администратор интернет магазина', 1),
('Менеджер по продажам', 'Менеджер общается с клиентами и поставщиками', 2),
('Кладовщик', 'Работник склада', 3),
('Курьер', 'Доставляет купленные товары покупателю', 4);

-- 
-- Dumping data for table workers
--
INSERT INTO workers VALUES
(1, 'Василий', 'Администратор', '1985-10-03', '345345', 'Ул. Победы 6', 7568),
(2, 'Стас', 'Менеджер по продажам', '1996-10-06', '5435345', 'Ул. Дружбы 8', 6897),
(3, 'Влад', 'Кладовщик', '1992-10-29', '36436346', 'Ул. Зеленая 2', 3463),
(4, 'Игорь', 'Курьер', '1991-10-20', '435345', 'Ул. Янтарная 4', 4986);

-- 
-- Dumping data for table stockcontrolcard
--
INSERT INTO stockcontrolcard VALUES
(1, 4500, '2021-09-28', '2021-09-30', 'Сектор А ряд 6'),
(2, 5689, '2021-09-29', NULL, 'Сектор А ряд 1'),
(3, 6487, '2021-09-30', '2021-09-30', 'Сектор В ряд 2 '),
(4, 2789, '2021-10-01', '2021-10-02', 'Сектор Б ряд 7'),
(5, 5837, '2021-10-01', '2021-10-01', 'Сектор В ряд 3');

-- 
-- Dumping data for table storage
--
INSERT INTO storage VALUES
(1, 3, 'ул. Мира', 1),
(2, 3, 'ул. Мира', 2),
(3, 3, 'ул. Мира', 3),
(4, 3, 'ул. Мира', 4),
(5, 3, 'ул. Мира', 5);

-- 
-- Dumping data for table categories
--
INSERT INTO categories VALUES
('clock', 'Категория товаров "Часы"\r\n', 1),
('notebook', 'Категория товаров "Ноутбуки"', 2),
('phone', 'Категория товаров "Телефоны"', 3),
('tables', 'Категория товарво "Планшеты"', 4);

-- 
-- Dumping data for table goods
--
INSERT INTO goods VALUES
(1, 'phone 1', 'phone', 'image1.png', 'description of phone 1', 1),
(2, 'mi band 6', 'clock', 'image2.png', 'clock mi band 6', 2),
(3, 'macbook pro\r\n', 'notebook', 'image3.png', 'macbook pro 16 m1 16ram 515gb', 3),
(4, 'samsung tablet', 'tables', 'image4.png', 'samsung tablet 4ram 64gb', 4),
(5, 'xiaomi redmi', 'phone', 'image5.png  ', 'xioami redmi phone 4ram and 64gb', 5);

-- 
-- Dumping data for table waybill
--
INSERT INTO waybill VALUES
(1, '2021-09-29', 1, 1, 4000, 1),
(2, '2021-09-29', 2, 1, 5000, 2),
(3, '2021-09-30', 3, 1, 6000, 3),
(4, '2021-10-01', 4, 1, 2500, 4),
(5, '2021-10-01', 5, 2, 5000, 5);

-- 
-- Dumping data for table sales
--
INSERT INTO sales VALUES
(1, 1, '2021-09-30', 'fasfa@mail.ru', 4),
(2, 3, '2021-09-30', 'sdsfd@ya.ru', 4),
(3, 4, '2021-10-02', 'sdfdf@gmail.com\r\n', 4),
(4, 5, '2021-10-01', 'bvcvb@mail.ru', 4);

-- 
-- Dumping data for table providers
--
INSERT INTO providers VALUES
(1, 'Василий', '453563435', 1),
(2, 'Петр', '5435345435', 2),
(3, 'Василий', '453563435', 3),
(4, 'Василий', '453563435', 4),
(5, 'Стас', '65464565456', 5);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;